{% extends "frontOffice.html.twig" %}

{% block header %}
    {% include 'headerFrontOffice.html.twig' %}
{% endblock %}

{% block body %}
    {%
        set monthNames = {
            '01':'Janvier',
            '02':'F√©vrier',
            '03':'Mars',
            '04':'Avril',
            '05':'Mai',
            '06':'Juin',
            '07':'Juillet',
            '08':'Ao√ªt',
            '09':'Septembre',
            '10':'Octobre',
            '11':'Novembre',
            '12':'D√©cembre'
        }
    %}
    <h1>{{ frontConfig['site']['title'] }}</h1>
    <div class="tools toptools">
        <div class="searchbox"><input id="searchbox" placeholder="AAAA.mm.jj tags mots du titre"></div>
        <div class="guestTool"><a href="worker.php/l" title="Log in">üóùÔ∏è</a></div>
        <div class="tool"><a href="worker.php/w" title="New post" target="_blank">‚úíÔ∏è</a></div>
        <div class="tool"><a href="worker.php/g" title="Rebuild">üèóÔ∏è</a></div>
    </div>
    <div>{{ frontConfig['site']['motto'] }}</div>
    {% for year,months in posts %}
        <div class="yearcontainer">
        <div class="year">{{ year }}</div>
            {% for month,days in months %}
                <div class="monthcontainer">
                <div class="month">{{ attribute(monthNames,month) }}</div>
                    {% for day,times in days %}
                        <div class="daycontainer">
                            <div class="day">{{ day }} {{ attribute(monthNames,month) }} {{ year }}</div>
                            {% for time,seconds in times %}
                                {% for second,post in seconds %}
                                    <article data-searchable="{{year}}.{{month}}.{{day}} {{ post.yaml.title|e }} {% for tag in post.yaml.tags %} {{ tag|e }} {% endfor %}">
                                        <div class="tools"><div class="tool"><a href="worker.php/u/{{ post.filename| url_encode }}" title="Update post" target="_blank">‚úçÔ∏è</a></div><div class="tool"><a href="worker.php/n/{{ post.filename | url_encode }}" title="Create a new post as the next part" target="_blank">üóç</a></div></div>
                                        <div class="time">{{ time }}</div>
                                        <h2><a href="{{ post.getHtmlFilename | url_encode }}">{{ post.getHtmlTitle() | raw }}</a></h2>
                                            {% for tag in post.yaml.tags %}
                                                <div class="tag">{{ tag }}</div>
                                            {% endfor %}
                                        <div class="content">{{ post.getHtmlContent() | raw }}</div>
                                    </article>
                                {% endfor %}
                            {% endfor %}
                        </div>
                    {% endfor %}
                </div>
            {% endfor %}
        </div>
    {% endfor %}
{% endblock %}
